---
import BaseLayout from '../layouts/BaseLayout.astro';
import Header from '../sections/Header.astro';
import Card from '../components/Card.astro';
import { getCollection } from 'astro:content';

const currentPath = Astro.url.pathname;

const tutorials = await getCollection('tutorials');
const sortedTutorials = tutorials.sort((a, b) => 
  new Date(b.data.publishDate).getTime() - new Date(a.data.publishDate).getTime()
);

const featuredTutorials = sortedTutorials.filter(tutorial => tutorial.data.featured);
const regularTutorials = sortedTutorials.filter(tutorial => !tutorial.data.featured);
---

<BaseLayout 
  title="Aprende Ciberseguridad - Tutoriales T√©cnicos" 
  description="Tutoriales t√©cnicos para aprender conceptos de ciberseguridad, hacking √©tico y an√°lisis de vulnerabilidades con enfoque educativo."
>
  <Header currentPath={currentPath} />
  <main class="min-h-screen bg-gradient-to-b from-slate-50 to-slate-100 py-8">
    <div class="container mx-auto px-4">
      <!-- Encabezado -->
      <div class="text-center mb-12">
        <h1 class="text-4xl md:text-5xl font-bold text-slate-800 mb-4">
          üéì Aprende Ciberseguridad
        </h1>
        <p class="text-xl text-slate-600 max-w-3xl mx-auto leading-relaxed">
          Tutoriales t√©cnicos para estudiantes y profesionales interesados en ciberseguridad. 
          Conceptos fundamentales, metodolog√≠as y herramientas explicadas de forma √©tica y educativa.
        </p>
        <div class="mt-6 flex flex-wrap justify-center gap-4 text-sm text-slate-500">
          <span class="bg-white px-3 py-1 rounded-full border">üéØ Enfoque educativo</span>
          <span class="bg-white px-3 py-1 rounded-full border">‚öñÔ∏è Siempre legal</span>
          <span class="bg-white px-3 py-1 rounded-full border">üî¨ Laboratorios seguros</span>
        </div>
        
        <!-- Advertencia √©tica -->
        <div class="mt-8 max-w-4xl mx-auto bg-yellow-50 border border-yellow-200 rounded-lg p-6">
          <div class="flex items-start space-x-3">
            <div class="text-yellow-600 text-xl">‚ö†Ô∏è</div>
            <div class="text-left">
              <h3 class="font-semibold text-yellow-800 mb-2">
                Compromiso √âtico y Legal
              </h3>
              <p class="text-yellow-700 text-sm leading-relaxed">
                Todos nuestros tutoriales est√°n dise√±ados exclusivamente para <strong>educaci√≥n</strong> y <strong>defensa</strong>. 
                El uso de t√©cnicas de ciberseguridad debe ser siempre <strong>autorizado</strong>, <strong>legal</strong> y con fines <strong>constructivos</strong>. 
                No nos hacemos responsables del mal uso de la informaci√≥n proporcionada.
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- Tutoriales destacados -->
      {featuredTutorials.length > 0 && (
        <section class="mb-16">
          <h2 class="text-2xl font-bold text-slate-800 mb-8 flex items-center">
            <span class="text-yellow-500 mr-2">‚≠ê</span>
            Tutoriales Destacados
          </h2>
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {featuredTutorials.map((tutorial) => (
              <Card
                title={tutorial.data.title}
                description={tutorial.data.description}
                href={`/tutorials/${tutorial.slug}/`}
                tags={tutorial.data.tags}
                level={tutorial.data.level}
                estimatedTime={tutorial.data.estimatedTime}
                publishDate={tutorial.data.publishDate}
                category={tutorial.data.category}
                labEnvironment={tutorial.data.labEnvironment}
                prerequisites={tutorial.data.prerequisites}
              />
            ))}
          </div>
        </section>
      )}

      <!-- Todos los tutoriales -->
      <section>
        <h2 class="text-2xl font-bold text-slate-800 mb-8 flex items-center">
          <span class="text-blue-500 mr-2">üìñ</span>
          Todos los Tutoriales
          <span class="ml-2 text-sm font-normal text-slate-500">
            ({sortedTutorials.length} disponibles)
          </span>
        </h2>
        
        {sortedTutorials.length === 0 ? (
          <div class="text-center py-16 bg-white rounded-lg shadow-sm border">
            <div class="text-6xl mb-4">üî¨</div>
            <h3 class="text-xl font-semibold text-slate-700 mb-2">
              Laboratorio en construcci√≥n
            </h3>
            <p class="text-slate-500 max-w-md mx-auto">
              Estamos preparando tutoriales t√©cnicos de alta calidad con laboratorios seguros. 
              Vuelve pronto para aprender ciberseguridad de forma pr√°ctica y √©tica.
            </p>
          </div>
        ) : (
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {sortedTutorials.map((tutorial) => (
              <Card
                title={tutorial.data.title}
                description={tutorial.data.description}
                href={`/tutorials/${tutorial.slug}/`}
                tags={tutorial.data.tags}
                level={tutorial.data.level}
                estimatedTime={tutorial.data.estimatedTime}
                publishDate={tutorial.data.publishDate}
                category={tutorial.data.category}
                labEnvironment={tutorial.data.labEnvironment}
                prerequisites={tutorial.data.prerequisites}
              />
            ))}
          </div>
        )}
      </section>

      <!-- Niveles de dificultad -->
      <section class="mt-16">
        <h2 class="text-2xl font-bold text-slate-800 mb-8">
          üìä Explorar por Nivel
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
          <!-- Principiante -->
          <div class="bg-white p-6 rounded-lg shadow-sm border hover:shadow-md transition-shadow">
            <div class="text-3xl mb-3">üå±</div>
            <h3 class="text-lg font-semibold text-slate-800 mb-2">Principiante</h3>
            <p class="text-slate-600 text-sm mb-4">
              Conceptos b√°sicos, metodolog√≠as fundamentales y primeros pasos en ciberseguridad.
            </p>
            <div class="text-xs text-slate-500">
              {tutorials.filter(t => t.data.level === 'principiante').length} tutoriales
            </div>
          </div>

          <!-- Intermedio -->
          <div class="bg-white p-6 rounded-lg shadow-sm border hover:shadow-md transition-shadow">
            <div class="text-3xl mb-3">‚ö°</div>
            <h3 class="text-lg font-semibold text-slate-800 mb-2">Intermedio</h3>
            <p class="text-slate-600 text-sm mb-4">
              T√©cnicas espec√≠ficas, herramientas especializadas y an√°lisis m√°s profundos.
            </p>
            <div class="text-xs text-slate-500">
              {tutorials.filter(t => t.data.level === 'intermedio').length} tutoriales
            </div>
          </div>

          <!-- Avanzado -->
          <div class="bg-white p-6 rounded-lg shadow-sm border hover:shadow-md transition-shadow">
            <div class="text-3xl mb-3">üöÄ</div>
            <h3 class="text-lg font-semibold text-slate-800 mb-2">Avanzado</h3>
            <p class="text-slate-600 text-sm mb-4">
              Investigaci√≥n, desarrollo de exploits y an√°lisis forense especializado.
            </p>
            <div class="text-xs text-slate-500">
              {tutorials.filter(t => t.data.level === 'avanzado').length} tutoriales
            </div>
          </div>
        </div>
      </section>

      <!-- Categor√≠as t√©cnicas -->
      <section class="mt-16">
        <h2 class="text-2xl font-bold text-slate-800 mb-8">
          üîß Explorar por Categor√≠a
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
          <!-- General -->
          <div class="bg-white p-6 rounded-lg shadow-sm border hover:shadow-md transition-shadow">
            <div class="text-3xl mb-3">üìö</div>
            <h3 class="text-lg font-semibold text-slate-800 mb-2">Conceptos Generales</h3>
            <p class="text-slate-600 text-sm mb-4">
              Fundamentos, metodolog√≠as y principios √©ticos de la ciberseguridad.
            </p>
            <div class="text-xs text-slate-500">
              {tutorials.filter(t => t.data.category === 'general').length} tutoriales
            </div>
          </div>

          <!-- Web -->
          <div class="bg-white p-6 rounded-lg shadow-sm border hover:shadow-md transition-shadow">
            <div class="text-3xl mb-3">üåê</div>
            <h3 class="text-lg font-semibold text-slate-800 mb-2">Seguridad Web</h3>
            <p class="text-slate-600 text-sm mb-4">
              OWASP Top 10, aplicaciones web, APIs y servicios online.
            </p>
            <div class="text-xs text-slate-500">
              {tutorials.filter(t => t.data.category === 'web').length} tutoriales
            </div>
          </div>

          <!-- Network -->
          <div class="bg-white p-6 rounded-lg shadow-sm border hover:shadow-md transition-shadow">
            <div class="text-3xl mb-3">üîó</div>
            <h3 class="text-lg font-semibold text-slate-800 mb-2">Redes</h3>
            <p class="text-slate-600 text-sm mb-4">
              Protocolos, infraestructura, an√°lisis de tr√°fico y pentesting de redes.
            </p>
            <div class="text-xs text-slate-500">
              {tutorials.filter(t => t.data.category === 'network').length} tutoriales
            </div>
          </div>

          <!-- System -->
          <div class="bg-white p-6 rounded-lg shadow-sm border hover:shadow-md transition-shadow">
            <div class="text-3xl mb-3">üíª</div>
            <h3 class="text-lg font-semibold text-slate-800 mb-2">Sistemas</h3>
            <p class="text-slate-600 text-sm mb-4">
              Linux, Windows, escalada de privilegios y an√°lisis forense.
            </p>
            <div class="text-xs text-slate-500">
              {tutorials.filter(t => t.data.category === 'system').length} tutoriales
            </div>
          </div>
        </div>
      </section>

      <!-- Recursos adicionales -->
      <section class="mt-16">
        <h2 class="text-2xl font-bold text-slate-800 mb-8">
          üõ†Ô∏è Recursos y Laboratorios
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <!-- Laboratorios virtuales -->
          <div class="bg-gradient-to-r from-blue-50 to-blue-100 p-6 rounded-lg border border-blue-200">
            <h3 class="text-lg font-semibold text-blue-800 mb-3 flex items-center">
              <span class="mr-2">üñ•Ô∏è</span>
              Laboratorios Virtuales Seguros
            </h3>
            <p class="text-blue-700 text-sm mb-4">
              Entornos controlados para practicar t√©cnicas sin riesgo legal o √©tico.
            </p>
            <ul class="text-blue-600 text-sm space-y-1">
              <li>‚Ä¢ VulnHub - M√°quinas virtuales vulnerables</li>
              <li>‚Ä¢ HackTheBox - Plataforma de pentesting</li>
              <li>‚Ä¢ TryHackMe - Aprendizaje gamificado</li>
              <li>‚Ä¢ DVWA - Aplicaci√≥n web vulnerable</li>
            </ul>
          </div>

          <!-- Herramientas √©ticas -->
          <div class="bg-gradient-to-r from-green-50 to-green-100 p-6 rounded-lg border border-green-200">
            <h3 class="text-lg font-semibold text-green-800 mb-3 flex items-center">
              <span class="mr-2">üîß</span>
              Herramientas Educativas
            </h3>
            <p class="text-green-700 text-sm mb-4">
              Software y recursos para aprendizaje autorizado y √©tico.
            </p>
            <ul class="text-green-600 text-sm space-y-1">
              <li>‚Ä¢ Kali Linux - Distribuci√≥n de pentesting</li>
              <li>‚Ä¢ Burp Suite - An√°lisis de aplicaciones web</li>
              <li>‚Ä¢ Wireshark - An√°lisis de protocolos</li>
              <li>‚Ä¢ Nmap - Escaneo de redes</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Llamada a la acci√≥n -->
      <section class="mt-16 bg-gradient-to-r from-purple-50 to-purple-100 p-8 rounded-lg border border-purple-200">
        <div class="text-center">
          <h2 class="text-2xl font-bold text-purple-800 mb-4">
            ¬øListo para comenzar tu carrera en ciberseguridad?
          </h2>
          <p class="text-purple-700 mb-6 max-w-2xl mx-auto">
            La ciberseguridad es un campo en constante evoluci√≥n. 
            Comienza con los fundamentos y avanza gradualmente hacia especializaciones t√©cnicas.
          </p>
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a 
              href="/guides" 
              class="bg-purple-600 text-white px-6 py-3 rounded-md hover:bg-purple-700 transition-colors font-medium"
            >
              Comenzar con lo B√°sico
            </a>
            <a 
              href="/resources" 
              class="border border-purple-600 text-purple-600 px-6 py-3 rounded-md hover:bg-purple-50 transition-colors font-medium"
            >
              Ver M√°s Recursos
            </a>
          </div>
        </div>
      </section>
    </div>
  </main>
</BaseLayout>
